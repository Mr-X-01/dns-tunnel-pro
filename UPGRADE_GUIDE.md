# üîÑ Upgrade Guide - DNS Tunnel Pro v1.1.0

## üéâ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ **Let's Encrypt SSL** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤–º–µ—Å—Ç–æ self-signed
- ‚úÖ **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ—Ä—Ç—ã** - –≤—ã–±–∏—Ä–∞–π—Ç–µ –ª—é–±–æ–π –ø–æ—Ä—Ç –¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏ (10000-60000)
- ‚úÖ **UFW Firewall** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞, email, –ø–æ—Ä—Ç–æ–≤
- ‚úÖ **INSTALL_INFO.txt** - –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

## üÜï –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. Let's Encrypt –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π
- Fallback –Ω–∞ self-signed –µ—Å–ª–∏ –¥–æ–º–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```bash
# –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —É–∫–∞–∂–∏—Ç–µ email –¥–ª—è Let's Encrypt
Email for Let's Encrypt SSL: your@email.com

# –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑:
certbot renew
```

### 2. –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–æ—Ä—Ç –≤–µ–±-–ø–∞–Ω–µ–ª–∏

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ—Ä—Ç—ã 443 –∏ 8443 —á–∞—Å—Ç–æ –∑–∞–Ω—è—Ç—ã
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ obscurity
- –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å:**
```bash
# –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç:
Web panel port (default: 45231, range: 10000-60000): 25000

# –ò–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞
```

### 3. UFW Firewall

**–ß—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è:**
```bash
‚úì Port 53/UDP   - DNS Server
‚úì Port CUSTOM   - Web Panel
‚úì Port 80/TCP   - HTTP (Let's Encrypt)
‚úì Port 443/TCP  - HTTPS
‚úì Port 22/TCP   - SSH (–≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç!)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
sudo ufw status verbose
```

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é

### –î–ª—è –Ω–æ–≤—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫

–ü—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
curl -sSL https://raw.githubusercontent.com/Mr-X-01/dns-tunnel-pro/main/install.sh | sudo bash
```

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
cp /opt/dns-tunnel-pro/server/database/tunnel.db ~/tunnel-backup.db

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
systemctl stop dns-tunnel

# 3. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É
rm -rf /opt/dns-tunnel-pro

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
curl -sSL https://raw.githubusercontent.com/Mr-X-01/dns-tunnel-pro/main/install.sh | sudo bash

# 5. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
cp ~/tunnel-backup.db /opt/dns-tunnel-pro/server/database/tunnel.db
systemctl restart dns-tunnel
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /opt/dns-tunnel-pro
git pull origin main

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot
apt-get install -y certbot

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ UFW
ufw allow 53/udp
ufw allow YOUR_WEB_PORT/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable

# 4. –ü–æ–ª—É—á–∏—Ç–µ Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot certonly --standalone -d YOUR_DOMAIN --email YOUR_EMAIL

# 5. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥
nano /opt/dns-tunnel-pro/server/config/settings.yml
# –ò–∑–º–µ–Ω–∏—Ç–µ:
# - web_panel.port –Ω–∞ –Ω—É–∂–Ω—ã–π
# - ssl_cert: /etc/letsencrypt/live/YOUR_DOMAIN/fullchain.pem
# - ssl_key: /etc/letsencrypt/live/YOUR_DOMAIN/privkey.pem

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
systemctl restart dns-tunnel
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ settings.yml

```yaml
server:
  ip: YOUR_SERVER_IP
  domain: YOUR_DOMAIN
  ssl_method: "Let's Encrypt"  # –∏–ª–∏ "Self-signed"

web_panel:
  port: CUSTOM_PORT  # —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è!
  ssl_cert: ssl/cert.pem
  ssl_key: ssl/key.pem
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**
   - ‚úÖ Let's Encrypt (–≤–∞–ª–∏–¥–Ω—ã–µ)
   - ‚úÖ Auto-renewal
   - ‚úÖ –ë—Ä–∞—É–∑–µ—Ä—ã –Ω–µ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

2. **Firewall**
   - ‚úÖ –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
   - ‚úÖ SSH –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω (–≤–∞–∂–Ω–æ!)
   - ‚úÖ DDoS protection —á–µ—Ä–µ–∑ rate limiting

3. **–ü–æ—Ä—Ç—ã**
   - ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–æ—Ä—Ç –≤–µ–±-–ø–∞–Ω–µ–ª–∏
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# 1. –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
systemctl status dns-tunnel

# 2. –ü–æ—Ä—Ç—ã
ss -tuln | grep -E ':(53|80|443|YOUR_PORT)'

# 3. Firewall
sudo ufw status

# 4. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -connect YOUR_DOMAIN:YOUR_PORT < /dev/null 2>&1 | grep -A 2 'Verify'

# 5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ
cat /opt/dns-tunnel-pro/INSTALL_INFO.txt

# 6. –õ–æ–≥–∏
journalctl -u dns-tunnel -n 50
```

## ‚ùì FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤?**
A: –ù–µ—Ç, –∫–ª–∏–µ–Ω—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã. –ü—Ä–æ—Å—Ç–æ —Å–∫–∞—á–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏–∑ –≤–µ–±-–ø–∞–Ω–µ–ª–∏.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ Let's Encrypt –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
A: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- –î–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- –ü–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã
- DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏?**
A: –î–∞, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/opt/dns-tunnel-pro/server/config/settings.yml` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å.

**Q: –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤?**
A: Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç cron job. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `certbot renew --dry-run`

**Q: Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞: `sudo ufw status verbose`

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Let's Encrypt fails

**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ–º–µ–Ω –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
dig YOUR_DOMAIN

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ self-signed –≤—Ä–µ–º–µ–Ω–Ω–æ
# –û–Ω–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç
ss -tuln | grep LISTEN

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–±–µ—Ä–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues**: https://github.com/Mr-X-01/dns-tunnel-pro/issues
- **Changelog**: –°–º. CHANGELOG.md
- **Documentation**: –°–º. README.md

---

**–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π! üöÄ**
